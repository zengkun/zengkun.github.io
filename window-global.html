<!DOCTYPE HTML>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Keywords" content="blog" />
    <meta name="Description" content="blog" />
    <title>学习笔记</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="/main.css" />
</head>

<body>
    <div class="main">
        <div class="header">
            <ul id="pages">
                <li><a href="/">home</a></li>
                <li><a href="/#/tags">tags</a></li>
                <li><a href="/#/archive">archive</a></li>
            </ul>
        </div>
        <div class="wrap-header">
            <h1>
                <a href="/" id="title"></a>
            </h1>
        </div>
        <div id="md" style="display: none;">
        <!-- 不能有缩进 -->
<!-- markdown -->

参考：
<https://blog.csdn.net/lzh_15617663141/article/details/78081229>

<https://blog.csdn.net/chenchunlin526/article/details/78908592>

<https://www.jianshu.com/p/93a723035f10>


## Global
- 1) 所有在全局作用域内定义的属性和方法，都是`Global`对象的属性。 
- 2) `Global`对象不能直接使用，也不能用new运算符创建。  
- 3) `Global`对象在JavaScript引擎被初始化时创建，并初始化其方法和属性。  
- 4) 浏览器把`Global`对象作为`window`对象的一部分实现了，因此，所有的全局属性和函数都是`window`对象的属性和方法。 

`global对象是单体内置对象，即不依赖宿主环境的对象。`

## 起因/场景
Vue 项目中可使用global，等价于window

## webpack在执行打包压缩的时候加入判断访问环境是否支持global
类似：
~~~~{javascript}
(function(global) {
    console.log(global);
}(typeof global !== "undefined" && global || window))
~~~~
所以 dev 或 build 编译打包后，global指向window

----- main.js
~~~~{javascript}
console.log(global === window);
console.log(window);
console.log(global);
~~~~
~~~~
true
Window {postMessage: ƒ, blur: ƒ, focus: ƒ, close: ƒ, parent: Window, …}
Window {postMessage: ƒ, blur: ƒ, focus: ƒ, close: ƒ, parent: Window, …}
~~~~

## 没有经过编译的浏览器不能直接访问global

----- index.html
~~~~{javascript}
console.log(window);
console.log(global);
~~~~
~~~~
true
Window {postMessage: ƒ, blur: ƒ, focus: ƒ, close: ƒ, parent: Window, …}
Uncaught ReferenceError: global is not defined
~~~~
￼



<!-- markdown end -->
        </div>
        <div class="entry" id="main">
        <!-- 不能有缩进 -->
<!-- content -->
<p>参考：
<a href="https://blog.csdn.net/lzh_15617663141/article/details/78081229">https://blog.csdn.net/lzh_15617663141/article/details/78081229</a></p>

<p><a href="https://blog.csdn.net/chenchunlin526/article/details/78908592">https://blog.csdn.net/chenchunlin526/article/details/78908592</a></p>

<p><a href="https://www.jianshu.com/p/93a723035f10">https://www.jianshu.com/p/93a723035f10</a></p>

<h2 id="global">Global</h2>

<ul>
<li>1) 所有在全局作用域内定义的属性和方法，都是<code>Global</code>对象的属性。&nbsp;</li>
<li>2) <code>Global</code>对象不能直接使用，也不能用new运算符创建。&nbsp;&nbsp;</li>
<li>3) <code>Global</code>对象在JavaScript引擎被初始化时创建，并初始化其方法和属性。&nbsp;&nbsp;</li>
<li>4) 浏览器把<code>Global</code>对象作为<code>window</code>对象的一部分实现了，因此，所有的全局属性和函数都是<code>window</code>对象的属性和方法。&nbsp;</li>
</ul>

<p><code>global对象是单体内置对象，即不依赖宿主环境的对象。</code></p>

<h2 id="">起因/场景</h2>

<p>Vue 项目中可使用global，等价于window</p>

<h2 id="webpackglobal">webpack在执行打包压缩的时候加入判断访问环境是否支持global</h2>

<p>类似：</p>

<pre class=" language-javascript"><code class=" language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>global<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log<span class="token punctuation">(</span></span>global<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> global <span class="token operator">!</span><span class="token operator">==</span> <span class="token string">"undefined"</span> <span class="token operator">&amp;&amp;</span> global <span class="token operator">||</span> window<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>所以 dev 或 build 编译打包后，global指向window

----- main.js
<pre class=" language-javascript"><code class=" language-javascript">console<span class="token punctuation">.</span><span class="token function">log<span class="token punctuation">(</span></span>global <span class="token operator">===</span> window<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log<span class="token punctuation">(</span></span>window<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log<span class="token punctuation">(</span></span>global<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><pre><code>true
Window&nbsp;{postMessage: ƒ, blur: ƒ, focus: ƒ, close: ƒ, parent: Window,&nbsp;…}
Window&nbsp;{postMessage: ƒ, blur: ƒ, focus: ƒ, close: ƒ, parent: Window,&nbsp;…}
</code></pre>

<h2 id="global">没有经过编译的浏览器不能直接访问global</h2>

<p>----- index.html
</p><pre class=" language-javascript"><code class=" language-javascript">console<span class="token punctuation">.</span><span class="token function">log<span class="token punctuation">(</span></span>window<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log<span class="token punctuation">(</span></span>global<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><pre><code>true
Window&nbsp;{postMessage: ƒ, blur: ƒ, focus: ƒ, close: ƒ, parent: Window,&nbsp;…}
Uncaught ReferenceError: global is not defined
</code></pre>￼<p></p>
<!-- content end -->
        </div>
        <br>
        <br>
        <div id="disqus_thread"></div>
        <div class="footer">
            <p>© Copyright 2017 <a href="mailto:zengkun0415@sina.com"> zengkun0415@sina.com</a></p>
        </div>
    </div>
    <script src="/main.js"></script>
    <script id="content" type="text/mustache">
        <h1>{{title}}</h1>
        <div class="tag">
            {{date}} by {{author}} {{#tags}}
            <a href="/#/tag/{{name}}">#{{name}}</a> {{/tags}}
        </div>
    </script>
    <script id="pagesTemplate" type="text/mustache">
        {{#pages}}
        <li>
            <a href="{{path}}">{{title}}</a>
        </li>
        {{/pages}}
    </script>
    <script>
    $(document).ready(function() {
        $.ajax({
            url: "/main.json",
            type: "GET",
            dataType: "json",
            success: function(data) {
                $("#title").html(data.name);
                var pagesTemplate = Hogan.compile($("#pagesTemplate").html());
                var pagesHtml = pagesTemplate.render({
                    "pages": data.pages
                });
                $("#pages").append(pagesHtml);
                //path
                var path = "window-global.html";
                //path end
                var now = 0;
                for (var i = 0; i < data.posts.length; ++i)
                    if (path == data.posts[i].path)
                        now = i;
                var post = data.posts[now];
                var tmp = post.tags.split(" ");
                var tags = [];
                for (var i = 0; i < tmp.length; ++i)
                    if (tmp[i].length > 0)
                        tags.push({
                            "name": tmp[i]
                        });
                var contentTemplate = Hogan.compile($("#content").html());
                var contentHtml = contentTemplate.render({
                    "title": post.title,
                    "tags": tags,
                    "date": post.date,
                    "author": post.author ? post.author : data.name
                });
                $("#main").prepend(contentHtml);
            }
        });
    });
    </script>
    <script src="https://cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ["\\(", "\\)"]], processEscapes: true}});
    </script>
</body>

</html>
